<?php
/**
* 
*/
class InsertController extends \Phalcon\Mvc\Controller
{
	private $con;
	private $table_name;

	function initialize()
	{
		$link = mysqli_connect('localhost', 'root', '', 'test_phalcon');
		$link->query("SET NAMES 'UTF-8'");

		$this->con = $link;
		$this->table_name = 'country';
		// var_dump($this->db);
		// var_dump($connection);
	}

	function ShowAction()
	{
		$query = "SELECT * FROM `$this->table_name`";
		$res = $this->con->query($query);
		while($row = $res->fetch_assoc()) {
	        echo $row['name']."<br>";
	    }
	}

	function TruncateAction()
	{
		$query = "TRUNCATE TABLE `$this->table_name`";
		$this->db->query($query);
	}

	function IndexAction()
	{
		echo "start<br>";	
		$query = "CREATE TABLE IF NOT EXISTS `country` (
		  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
		  `name` varchar(255) NOT NULL,
		  PRIMARY KEY (`id`)
		) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8";
		$this->db->query($query);
		echo $link->error;

		$query = "INSERT INTO `$this->table_name` VALUES 
		(NULL,'Австралия'),
		(NULL,'Австрия'),
		(NULL,'Азербайджан'),
		(NULL,'Аландские острова'),
		(NULL,'Албания'),
		(NULL,'Алжир'),
		(NULL,'Ангилья'),
		(NULL,'Ангола'),
		(NULL,'Андорра'),
		(NULL,'Антигуа и Барбуда'),
		(NULL,'Аргентина'),
		(NULL,'Армения'),
		(NULL,'Аруба'),
		(NULL,'Афганистан'),
		(NULL,'Бангладеш'),
		(NULL,'Барбадос'),
		(NULL,'Бахрейн'),
		(NULL,'Белиз'),
		(NULL,'Белоруссия'),
		(NULL,'Бельгия'),
		(NULL,'Бенин'),
		(NULL,'Болгария'),
		(NULL,'Боливия'),
		(NULL,'Бонэйр'),
		(NULL,'Босния и Герцеговина'),
		(NULL,'Ботсвана'),
		(NULL,'Бразилия'),
		(NULL,'Бруней'),
		(NULL,'Буркина-Фасо'),
		(NULL,'Бурунди'),
		(NULL,'Бутан'),
		(NULL,'Вануату'),
		(NULL,'Ватикан'),
		(NULL,'Великобритания'),
		(NULL,'Венгрия'),
		(NULL,'Венесуэла'),
		(NULL,'Восточный Тимор'),
		(NULL,'Вьетнам'),
		(NULL,'Габон'),
		(NULL,'Гаити'),
		(NULL,'Гайана'),
		(NULL,'Гамбия'),
		(NULL,'Гана'),
		(NULL,'Гваделупа'),
		(NULL,'Гватемала'),
		(NULL,'Гвиана'),
		(NULL,'Гвинея'),
		(NULL,'Гвинея-Бисау'),
		(NULL,'Германия'),
		(NULL,'Гернси'),
		(NULL,'Гибралтар'),
		(NULL,'Гондурас'),
		(NULL,'ГонконгСпециальный административный район Гонконг</i> Китайской Народной Республики: территория, управляемая Китаем на основе специального международного соглашения'),
		(NULL,'Гренада'),
		(NULL,'Гренландия'),
		(NULL,'Греция'),
		(NULL,'Грузия'),
		(NULL,'Гуам'),
		(NULL,'Дания'),
		(NULL,'Джибути'),
		(NULL,'Доминика'),
		(NULL,'Доминиканская Республика'),
		(NULL,'ДНР'),
		(NULL,'Египет'),
		(NULL,'Замбия'),
		(NULL,'Зимбабве'),
		(NULL,'Израиль'),
		(NULL,'Индия'),
		(NULL,'Индонезия'),
		(NULL,'Иордания'),
		(NULL,'Ирак'),
		(NULL,'Иран'),
		(NULL,'Ирландия'),
		(NULL,'Исландия'),
		(NULL,'Испания'),
		(NULL,'Италия'),
		(NULL,'Йемен'),
		(NULL,'Кабо-Верде'),
		(NULL,'Казахстан'),
		(NULL,'Острова Кайман'),
		(NULL,'Камбоджа'),
		(NULL,'Камерун'),
		(NULL,'Канада'),
		(NULL,'Катар'),
		(NULL,'Кения'),
		(NULL,'Кипр'),
		(NULL,'Северный Кипр'),
		(NULL,'Киргизия[25]</sup>'),
		(NULL,'Кирибати'),
		(NULL,'Китайская Республика[26]</sup> государствами как легитимное правительство всего Китая и до 25 октября 1971 года представляла Китай в ООН, включает Тайвань'),
		(NULL,'Кокосовые острова'),
		(NULL,'Колумбия'),
		(NULL,'Республика Конго'),
		(NULL,'Республика Корея'),
		(NULL,'Республика КосовоАвтономным краем Косово и Метохия</i> в составе Сербии'),
		(NULL,'Коста-Рика'),
		(NULL,'Кот-д’Ивуар'),
		(NULL,'Куба'),
		(NULL,'Кувейт'),
		(NULL,'Кюрасао'),
		(NULL,'Лаос'),
		(NULL,'Латвия'),
		(NULL,'Лесото'),
		(NULL,'Либерия'),
		(NULL,'Ливан'),
		(NULL,'Ливия'),
		(NULL,'Литва'),
		(NULL,'Лихтенштейн'),
		(NULL,'ЛНР'),
		(NULL,'Люксембург'),
		(NULL,'Маврикий'),
		(NULL,'Мавритания'),
		(NULL,'Мадагаскар'),
		(NULL,'Майотта'),
		(NULL,'Македония'),
		(NULL,'Малави'),
		(NULL,'Малайзия'),
		(NULL,'Мали'),
		(NULL,'Мальдивы'),
		(NULL,'Мальта'),
		(NULL,'Марокко'),
		(NULL,'Мартиника'),
		(NULL,'Маршалловы Острова'),
		(NULL,'Мексика'),
		(NULL,'Микронезия'),
		(NULL,'Мозамбик'),
		(NULL,'Молдавия'),
		(NULL,'Монако'),
		(NULL,'Монголия'),
		(NULL,'Монтсеррат'),
		(NULL,'Мьянма'),
		(NULL,'Нагорно-Карабахская Республика'),
		(NULL,'Намибия'),
		(NULL,'Науру'),
		(NULL,'Непал'),
		(NULL,'Нигер'),
		(NULL,'Нигерия'),
		(NULL,'Нидерланды'),
		(NULL,'Никарагуа'),
		(NULL,'Ниуэ'),
		(NULL,'Новая Зеландия'),
		(NULL,'Новая Каледония'),
		(NULL,'Норвегия'),
		(NULL,'Оман'),
		(NULL,'Пакистан'),
		(NULL,'Палау'),
		(NULL,'Панама'),
		(NULL,'Папуа — Новая Гвинея'),
		(NULL,'Парагвай'),
		(NULL,'Перу'),
		(NULL,'Польша'),
		(NULL,'Португалия'),
		(NULL,'ПМР'),
		(NULL,'Пуэрто-Рико'),
		(NULL,'Реюньон'),
		(NULL,'Россия'),
		(NULL,'Руанда'),
		(NULL,'Румыния'),
		(NULL,'Саба'),
		(NULL,'Сальвадор'),
		(NULL,'Самоа'),
		(NULL,'Сан-Марино'),
		(NULL,'Сан-Томе и Принсипи'),
		(NULL,'Саудовская Аравия'),
		(NULL,'Сахарская Арабская Демократическая Республика'),
		(NULL,'Свазиленд'),
		(NULL,'Северные Марианские острова'),
		(NULL,'Сейшельские Острова'),
		(NULL,'Сенегал'),
		(NULL,'Сен-Бартелеми'),
		(NULL,'Сен-Мартен'),
		(NULL,'Сен-Пьер и Микелон'),
		(NULL,'Сент-Винсент и Гренадины'),
		(NULL,'Сент-Китс и Невис'),
		(NULL,'Сент-Люсия'),
		(NULL,'Сербия'),
		(NULL,'Сингапур'),
		(NULL,'Синт-Мартен'),
		(NULL,'Синт-Эстатиус'),
		(NULL,'Сирия'),
		(NULL,'Словакия'),
		(NULL,'Словения'),
		(NULL,'Соломоновы Острова'),
		(NULL,'СомалиСомалийская Демократическая Республика</i>: разделена на несколько враждующих группировок и де-факто независимый Сомалиленд на севере'),
		(NULL,'Судан'),
		(NULL,'Суринам'),
		(NULL,'Сьерра-Леоне'),
		(NULL,'Таджикистан'),
		(NULL,'Таиланд'),
		(NULL,'Танзания'),
		(NULL,'Тёркс и Кайкос'),
		(NULL,'Того'),
		(NULL,'ТокелауТокелау (Юнион)</i>: зависимая территория Новой Зеландии'),
		(NULL,'Тонга'),
		(NULL,'Тринидад и Тобаго'),
		(NULL,'Тувалу'),
		(NULL,'Тунис'),
		(NULL,'Туркмения'),
		(NULL,'Турция'),
		(NULL,'Уганда'),
		(NULL,'Узбекистан'),
		(NULL,'Украина'),
		(NULL,'Уоллис и Футуна'),
		(NULL,'Уругвай'),
		(NULL,'Фареры'),
		(NULL,'Фиджи'),
		(NULL,'Филиппины'),
		(NULL,'Финляндия'),
		(NULL,'Фолклендские острова'),
		(NULL,'Франция'),
		(NULL,'Хорватия'),
		(NULL,'ЦАР'),
		(NULL,'Чад'),
		(NULL,'Черногория'),
		(NULL,'Чехия'),
		(NULL,'Чили'),
		(NULL,'Швейцария'),
		(NULL,'Швеция'),
		(NULL,'Шри-Ланка'),
		(NULL,'Эквадор'),
		(NULL,'Экваториальная Гвинея'),
		(NULL,'Эритрея'),
		(NULL,'Эстония'),
		(NULL,'Эфиопия'),
		(NULL,'Южная Осетия'),
		(NULL,'Южный Судан'),
		(NULL,'Ямайка'),
		(NULL,'Япония')";

		$this->db->query($query);
		echo $link->error;
	}
}
?>